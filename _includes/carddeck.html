<div class = "container">
  <div class = "row">
    <div class = "col-lg-12 col-lg-offset-2">
      <!-- Test if page.category is specified and filter list to be output -->
      {% if page.category And page.category != empty And page.category != nil %}
        {% assign list_of_posts = site.categories[page.category] %}
      {% else %}
        {% assign list_of_posts = site.posts %}
      {% endif %}
      {% for post in list_of_posts %}
        {% assign loop_index = forloop.index %}
        {% assign row_finder = loop_index | modulo: 4 %}
        {% if row_finder == 1 %}
          <div class = "card-deck">
            {% include card.html %}
        {% elsif row_finder == 0 %}
            {% include card.html %}
          </div>
        {% else %}
          {% include card.html %}
        {% endif %}
      {% endfor %}
        
      <!-- To catch if the for-loop exits wihout closing the divs -->
      {% if row_finder != 0 %}
        </div>
      {% endif %}
    </div>
  </div>
</div>
